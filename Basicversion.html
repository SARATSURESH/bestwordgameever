<!DOCTYPE html>
<html>
  <head>
    <title>Word Guessing Game</title>
  </head>
  <body onload="startGame()">
    <h1>Word Guessing Game</h1>
    <p>Guess the 5-letter word. C indicates the correct letters in your guess and I indicates the wrong ones</p>
    <form>
      <input type="text" id="guess" name="guess" maxlength="5" title="Guess the 5-letter word">
      <input type="button" value="Submit" onclick="checkGuess()">
    </form>
    <p>Turns left: <span id="guesses"></span></p>
    <p id="output"></p>
    <p>Guesses:</p>
    <p id="guesslist"></p>    
    <script>
      //declare variables
      let word;
      let guesses;
      let output;
      let guesslist;
      let num1;
      let num2;

      //function to start the game
      function startGame(){
        //set up the game
        fetch('https://raw.githubusercontent.com/SARATSURESH/bestwordgameever/main/list.txt')
        .then(response => response.text())
        .then(data => {
          const words = data.split('\n');
          word = words[Math.floor(Math.random() * words.length)].trim();
          guesses = 8;
          output = "";
          guesslist = "";
          num1 = 0;
          num2 = 0;
        
          //display the game
          document.getElementById("guesses").innerHTML = guesses;
          document.getElementById("output").innerHTML = output;
          document.getElementById("guesslist").innerHTML = guesslist;
        });
      }

      //function to check the guess
      function checkGuess(){
        //get the guess from the input
        let guess = document.getElementById("guess").value.toLowerCase();
        let targetWord = word.toLowerCase();

        //check if the guess is correct
        if (guess === targetWord){
          output = "You Win!";
        } else {
          //check how many characters are correct
          num1 = 0;
          num2 = 0;
          for (let i=0; i<guess.length; i++){
            if (guess[i] == targetWord[i]){
              num1++;
            } else if (targetWord.includes(guess[i])){
              num2++;
            }
          }

          //update the output
          output = num1 + "C " + num2 + "I";
          guesslist += guess + " " + num1 + "C " + num2 + "I<br>";
          guesses--;
        }

        //display the game
        document.getElementById("guesses").innerHTML = guesses;
        document.getElementById("output").innerHTML = output;
        document.getElementById("guesslist").innerHTML = guesslist;

        //check if the game is over
        if (guesses == 0){
          output = "You are out of turns. The correct word is " + word;
          document.getElementById("output").innerHTML = output;
          document.getElementById("guess").disabled = true;
        }
      }
    </script>
  </body>
</html>
